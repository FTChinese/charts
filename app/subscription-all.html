<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Subscription</title>
  <meta name="google-signin-client_id" content="911260228291-d2b7cjs7c0ajobjd6l89133tv4bmrcjb.apps.googleusercontent.com">
  <meta name="google-signin-scope" content="https://www.googleapis.com/auth/analytics.readonly">
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" href="http://static.ftchinese.com/img/ipad_icon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>


<p align=right>
  <!-- The Sign-in button. This will run `queryReports()` on success. -->
  <div class="g-signin2" data-onsuccess="queryReportsAll"></div>
</p>

<div class="page-container" id="charts-container">
  <h1 class="page-title">Subscription</h1>
</div>



<!-- build:remove -->
<script src="../bower_components/highcharts/highcharts.js"></script>
<script src="../bower_components/highcharts/highcharts-more.js"></script>
<script src="../bower_components/highmaps-beta/modules/map.js"></script>
<script src="../bower_components/highmaps-beta/modules/data.js"></script>
<script src="../bower_components/highcharts/modules/funnel.js"></script>
<script src="../bower_components/highcharts/modules/annotations.js"></script>
<script type="text/javascript" src="scripts/highcharts.js"></script>
<!-- endbuild -->
<script type="text/javascript" src="scripts/main.js"></script>


<script>
// MARK: - These are different in every page. 
var VIEW_ID = '10995661';
var eventCategory;
var pageTitle;
var startDate;
var endDate = 'yesterday';
var tapAction;
var buySuccessStandardMonthly;
var buySuccessStandard;
var buySuccessPremium;
const annualize = parseInt(gup('annualize', window.location.href), 10) || 1;
var standardPriceMonthly = 28 * annualize;
var standardPrice = 198;
var premiumPrice = 1998;
var standardPriceMonthlyPromotion = 28;
var standardPricePromotion = 168;
var premiumPricePromotion = 1698;
var promotionDates = ['20181111'];
var skuStandard;
var skuPremium;
var affiliation;
var isAffiliationExcluded = false;
var eventCategories = [
  {name: 'iOS', eventCategory: 'Privileges', tapAction: 'Tap Subscription', buySuccessStandardMonthly: 'buy success: com.ft.ftchinese.mobile.subscription.member.monthly', buySuccessStandard: 'buy success: com.ft.ftchinese.mobile.subscription.member', buySuccessPremium: 'buy success: com.ft.ftchinese.mobile.subscription.vip', standardPriceMonthly: standardPriceMonthly * 0.7, standardPrice: standardPrice * 0.7, premiumPrice: premiumPrice * 0.7, standardPriceMonthlyPromotion: standardPriceMonthlyPromotion * 0.7, standardPricePromotion: standardPricePromotion * 0.7, premiumPricePromotion: premiumPricePromotion * 0.7, promotionDates: promotionDates, skuStandardMonthly: 'com.ft.ftchinese.mobile.subscription.member.monthly', skuStandard: 'com.ft.ftchinese.mobile.subscription.member', skuPremium: 'com.ft.ftchinese.mobile.subscription.vip', affiliation: '^iOS IAP:', isAffiliationExcluded: false},
  {'name': 'Android', eventCategory: 'Android Privileges', tapAction: 'Tap', buySuccessStandardMonthly: 'Buy success: ftc_standard_monthly', buySuccessStandard: 'Buy success: ftc_standard', buySuccessPremium: 'Buy success: ftc_premium', standardPriceMonthly: standardPriceMonthly, standardPrice: standardPrice, premiumPrice: premiumPrice, standardPriceMonthlyPromotion: standardPriceMonthlyPromotion, standardPricePromotion: standardPricePromotion, premiumPricePromotion: premiumPricePromotion, promotionDates: promotionDates, skuStandardMonthly: 'ftc_standard_monthly', skuStandard: 'ftc_standard', skuPremium: 'ftc_premium', affiliation: '^Android', isAffiliationExcluded: false},
  {'name': 'Web Site', eventCategory: 'Web Privileges', tapAction: 'Tap', buySuccessStandardMonthly: 'Buy Success:Standard Monthly', buySuccessStandard: 'Buy Success:Standard', buySuccessPremium: 'Buy Success:Premium', standardPriceMonthly: standardPriceMonthly, standardPrice: standardPrice, premiumPrice: premiumPrice, standardPriceMonthlyPromotion: standardPriceMonthlyPromotion, standardPricePromotion: standardPricePromotion, premiumPricePromotion: premiumPricePromotion * 0.7, promotionDates: promotionDates, skuStandard: 'Standard Monthly', skuStandard: 'Standard', skuPremium: 'Premium', affiliation: '^(iOS|Android)', isAffiliationExcluded: true}
];
eventCategory = 'Privileges';
tapAction = 'Tap Subscription';
buySuccessStandardMonthly = 'buy success: com.ft.ftchinese.mobile.subscription.member.monthly';
buySuccessStandard = 'buy success: com.ft.ftchinese.mobile.subscription.member';
buySuccessPremium = 'buy success: com.ft.ftchinese.mobile.subscription.vip';
//startDate = '2018-05-10';
startDate = '14daysago';
pageTitle = 'Subscription';


document.title = pageTitle;
document.querySelector('.page-title').innerHTML = pageTitle;

function constructQuerryData(startDate, endDate) {
  var allQueryData = [];
  for (const s of eventCategories) {
    eventCategory = s.eventCategory;
    tapAction = s.tapAction;
    buySuccessStandardMonthly = s.buySuccessStandardMonthly;
    buySuccessStandard = s.buySuccessStandard;
    buySuccessPremium = s.buySuccessPremium;
    skuStandardMonthly = s.skuStandardMonthly;
    skuStandard = s.skuStandard;
    skuPremium = s.skuPremium;
    affiliation = s.affiliation;
    isAffiliationExcluded = s.isAffiliationExcluded;
    var queryData = [
      
      // 0 Dispay Subscription from Exclusive Story
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'ExclusiveContent/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 1 Display Subscription from English Text
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EnglishText/.+/en'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 2 Display Subscription from FT Radio
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'Radio/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 3 Display Subscription from Speed Read
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'SpeedReading/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 4 Display Subscription from Archive
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'Archive/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 5 Display Subscription from Editor's Choice
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EditorsChoice/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 6 Display Subscription from Billingual Text
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EnglishText/.+/ce'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 7 Display Subscription from Ad Blocker
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'AdBlocker'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 8 Buy Subscription from Exclusive Story
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'ExclusiveContent/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 9 Buy Subscription from English Text
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EnglishText/.+/en'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 10 Buy Subscription from FT Radio
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'Radio/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 11 Buy Subscription from Speed Read
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'SpeedReading/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 12 Buy Subscription from Archive
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'Archive/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 13 Buy Subscription from Editor's Choice
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EditorsChoice/'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 14 Buy Subscription from Billingual Text
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'EnglishText/.+/ce'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 15 Buy Subscription from Ad Blocker
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'REGEXP',
                'expressions': [
                  buySuccessStandard
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'AdBlocker'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
    },// 16 Standard Subscription Buying
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            }
            
          ]
        }
      ]
    },// 17 Buy Premium Subscription
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessPremium
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 18 Revenue from Language Switch
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:transactionRevenue'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'expressions': [
                  'LanguageSwitch'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'not': isAffiliationExcluded,
                'expressions': [
                  affiliation
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 19 Display Paywall from Language Switch
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  'Display'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventLabel',
                'operator': 'REGEXP',
                'expressions': [
                  'LanguageSwitch'
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 20 Revenue from Promo Box
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:transactionRevenue'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'expressions': [
                  'promobox'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'not': isAffiliationExcluded,
                'expressions': [
                  affiliation
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 21 Billigual and English Text Revenue
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:transactionRevenue'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'expressions': [
                  'EnglishText'
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:affiliation',
                'operator': 'REGEXP',
                'not': isAffiliationExcluded,
                'expressions': [
                  affiliation
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      },// 22 Standard Monthly Subscription Buying
      {
        'viewId': VIEW_ID,
        'dateRanges': [
          {
            'startDate': startDate,
            'endDate': endDate
          }
        ],
        'metrics': [
          {
            'expression': 'ga:uniqueEvents'
          }
        ],
        'dimensions': [
          {
            'name': 'ga:date'
          }
        ],
        'dimensionFilterClauses': [
          {
            'operator': 'AND',
            'filters': [
              {
                'dimensionName': 'ga:eventCategory',
                'operator': 'EXACT',
                'expressions': [
                  eventCategory
                ],
                'caseSensitive': true
              },
              {
                'dimensionName': 'ga:eventAction',
                'operator': 'EXACT',
                'expressions': [
                  buySuccessStandardMonthly
                ],
                'caseSensitive': true
              }
            ]
          }
        ]
      }
    ];
    for (const k of queryData) {
      allQueryData.push(k);
    }
  }
  //console.log (allQueryData);
  return allQueryData;
}

function drawChartsAll() {
  var chartId;
  // MARK: - The base key which should have no gap in data
  var keys = gaDataReports[0].data.rows.map(function(row){
    return row.dimensions[0];
  });

  var dataLength = gaDataReports.length;
  var eventCategoryLength = eventCategories.length;
  var step = dataLength / eventCategoryLength;

  drawChartByKey({
    title: 'New Subscriptions',
    type: 'column',
    percentage: false,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'data',
    showPlotLines: true,
    trendline: 'average',
    data: [
      {
        index: 16,
        name: 'Standard Annually'
      },
      {
        index: 22,
        name: 'Standard Monthly'
      },
      {
        index: 17,
        name: 'Premium Annually'
      }
    ]
  });


  drawChartByKey({
    title: 'New Revenue By Type',
    type: 'column',
    percentage: false,
    keys: keys,
    unitName: 'RMB',
    eventCategories: eventCategories,
    breakdown: 'data',
    showPlotLines: true,
    trendline: 'sum',
    data: [
      {
        index: 16,
        name: 'Standard Annually',
        multiplierKey: 'standardPrice'
      },
      {
        index: 22,
        name: 'Standard Monthly',
        multiplierKey: 'standardPriceMonthly'
      },
      {
        index: 17,
        name: 'Premium',
        multiplierKey: 'premiumPrice'
      }
    ],
    plotOptions: {
      column: {
          stacking: 'normal'
      }
    }
  });

  insertDivWithHTML('Note: Standard subscription is 198 RMB/year. Premium subscription is 1998 RMB/year. Apple IAP takes 30% from subscription revenue. ');

  drawChartByKey({
    title: 'New Revenue By Platform',
    type: 'column',
    percentage: false,
    keys: keys,
    unitName: 'RMB',
    eventCategories: eventCategories,
    breakdown: 'eventCategory',
    showPlotLines: true,
    data: [
      {
        index: 16,
        name: 'Standard',
        multiplierKey: 'standardPrice'
      },
      {
        index: 22,
        name: 'Standard Monthly',
        multiplierKey: 'standardPriceMonthly'
      },
      {
        index: 17,
        name: 'Premium',
        multiplierKey: 'premiumPrice'
      }
    ],
    plotOptions: {
      column: {
          stacking: 'normal'
      }
    }
  });


  drawChartByKey({
    title: 'New Revenue Breakdown',
    type: 'column',
    percentage: false,
    keys: keys,
    unitName: 'RMB',
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        index: 16,
        name: 'Standard',
        multiplierKey: 'standardPrice'
      },
      {
        index: 22,
        name: 'Standard Monthly',
        multiplierKey: 'standardPriceMonthly'
      },
      {
        index: 17,
        name: 'Premium',
        multiplierKey: 'premiumPrice'
      }
    ],
    plotOptions: {
      column: {
          stacking: 'normal'
      }
    }
  });


  // MARK: Buy Success Display
  drawPivotChartFromKey({
    conversion: true,
    title: 'Standard Subscription Sources',
    yAxisTitle: 'Percent',
    type: 'column',
    percentage: true,
    keys: keys,
    subtitle: ' ',
    unitName: '',
    decimalPoints: 0,
    eventCategories: eventCategories,
    originalData: [
      {
        index: 8,
        name: 'Exclusive Story'
      },
      {
        index: 14,
        name: 'Billingual Text'
      },
      {
        index: 9,
        name: 'English Text'
      },
      {
        index: 10,
        name: 'Radio'
      },
      {
        index: 11,
        name: 'Speedread'
      },
      {
        index: 12,
        name: 'Archive'
      },
      {
        index: 13,
        name: 'Editors\' Choice'
      },
      {
        index: 15,
        name: 'Ad Blocker'
      }
    ]
  });


  // MARK: Draw Display
  drawPivotChartFromKey({
    conversion: true,
    title: 'Subscription Paywall Display',
    yAxisTitle: 'Percent',
    type: 'column',
    percentage: true,
    keys: keys,
    subtitle: ' ',
    unitName: '',
    decimalPoints: 0,
    eventCategories: eventCategories,
    originalData: [
      {
        index: 0,
        name: 'Exclusive Story'
      },
      {
        index: 6,
        name: 'Billingual Text'
      },
      {
        index: 1,
        name: 'English Text'
      },
      {
        index: 2,
        name: 'Radio'
      },
      {
        index: 3,
        name: 'Speedread'
      },
      {
        index: 4,
        name: 'Archive'
      },
      {
        index: 5,
        name: 'Editors\' Choice'
      },
      {
        index: 7,
        name: 'Ad Blocker'
      }
    ]
  });


  // MARK: Draw Conversion
  drawPivotChartFromKey({
    conversion: true,
    title: 'Standard subscription Conversion',
    yAxisTitle: 'Percent',
    type: 'column',
    percentage: true,
    keys: keys,
    subtitle: ' ',
    unitName: '%',
    decimalPoints: 4,
    eventCategories: eventCategories,
    originalData: [
      {
        total: 0,
        part: 8,
        name: 'Exclusive Story'
      },
      {
        total: 6,
        part: 14,
        name: 'Billingual Text'
      },
      {
        total: 1,
        part: 9,
        name: 'English Text'
      },
      {
        total: 2,
        part: 10,
        name: 'Radio'
      },
      {
        total: 3,
        part: 11,
        name: 'Speedread'
      },
      {
        total: 4,
        part: 12,
        name: 'Archive'
      },
      {
        total: 5,
        part: 13,
        name: 'Editors\' Choice'
      },
      {
        total: 7,
        part: 15,
        name: 'Ad Blocker'
      }
    ]
  });


  drawChartByKey({
    conversion: true,
    title: 'Exclusive Story Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 0,
        part: 8,
        name: 'Exclusive Story'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'Billingual Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 6,
        part: 14,
        name: 'Billingual Text'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'English Text Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 1,
        part: 9,
        name: 'English Text'
      }
    ]
  });


  drawChartByKey({
    conversion: true,
    title: 'Radio Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 2,
        part: 10,
        name: 'Radio'
      }
    ]
  });


  drawChartByKey({
    conversion: true,
    title: 'Speedread Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 3,
        part: 11,
        name: 'Speedread'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'Archive Conversion',
    type: 'column',
    percentage: true,
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        total: 4,
        part: 12,
        name: 'Archive'
      }
    ]
  });


  drawChartByKey({
    title: 'Ecommerce: Billingual/English Revenue',
    type: 'column',
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    //trendline: 'sum',
    data: [
      {
        index: 21,
        name: 'English/Billingual'
      }
    ]
  });


  drawChartByKey({
    title: 'New Action Revenue',
    type: 'column',
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    data: [
      {
        index: 18,
        name: 'Language Switch'
      },
      {
        index: 20,
        name: 'Promo Box'
      }
    ],
    plotOptions: {
      column: {
          stacking: 'normal'
      }
    }
  });

  drawChartByKey({
    conversion: true,
    title: 'Language Switch ROI',
    subtitle: 'Revenue per Paywall Display',
    type: 'column',
    keys: keys,
    eventCategories: eventCategories,
    breakdown: 'all',
    showPlotLines: true,
    unitName: 'CNY Per Display',
    data: [
      {
        total: 19,
        part: 18,
        name: 'Language Switch'
      }
    ]
  });



}


</script>




<!-- Load the JavaScript API client and Sign-in library. -->
<script src="https://apis.google.com/js/client:platform.js"></script>

</body>
</html>