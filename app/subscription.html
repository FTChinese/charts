<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Subscription</title>
  <meta name="google-signin-client_id" content="911260228291-d2b7cjs7c0ajobjd6l89133tv4bmrcjb.apps.googleusercontent.com">
  <meta name="google-signin-scope" content="https://www.googleapis.com/auth/analytics.readonly">
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" href="http://static.ftchinese.com/img/ipad_icon.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>


<p align=right>
  <!-- The Sign-in button. This will run `queryReports()` on success. -->
  <div class="g-signin2" data-onsuccess="queryReportsAll"></div>
</p>

<div class="page-container" id="charts-container">
  <h1 class="page-title">Subscription</h1>
</div>



<!-- build:remove -->
<script src="../bower_components/highcharts/highcharts.js"></script>
<script src="../bower_components/highcharts/highcharts-more.js"></script>
<script src="../bower_components/highmaps-beta/modules/map.js"></script>
<script src="../bower_components/highmaps-beta/modules/data.js"></script>
<script src="../bower_components/highcharts/modules/funnel.js"></script>
<script src="../bower_components/highcharts/modules/annotations.js"></script>
<script type="text/javascript" src="scripts/highcharts.js"></script>
<!-- endbuild -->
<script type="text/javascript" src="scripts/main.js"></script>


<script>
// MARK: - These are different in every page. 
var product = gup('product', window.location.href);
// Replace with your view ID.
var VIEW_ID;// = '108134561'; 
//var VIEW_ID_1 = '10995661';
var eventCategory;
var pageTitle;

// Replace with your view ID.
// var VIEW_ID = '108134561'; 
// var VIEW_ID_1 = '10995661';
// var startDate = '14daysago';
var startDate;
// var startDate = '30daysago';
var endDate = 'yesterday';

// if (product === 'ios') {
//   VIEW_ID = '108134561';
// } else {
//   VIEW_ID = '10995661';
// }
VIEW_ID = '10995661';
var tapAction;
var buySuccessStandard;
var buySuccessPremium;
var stardardPrice = 198;
var premiumPrice = 1998;
var homePagePV;
if (product == 'ios') {
  eventCategory = 'Privileges';
  tapAction = 'Tap Subscription';
  buySuccessStandard = 'buy success: com.ft.ftchinese.mobile.subscription.member';
  buySuccessPremium = 'buy success: com.ft.ftchinese.mobile.subscription.vip';
  startDate = '2018-04-04';
  pageTitle = 'iOS Subscription';
  stardardPrice = stardardPrice * 0.7;
  premiumPrice = premiumPrice * 0.7;
  homePagePV = {
    'viewId': VIEW_ID,
    'dateRanges': [
      {
        'startDate': startDate,
        'endDate': endDate
      }
    ],
    'metrics': [
      {
        'expression': 'ga:screenviews'
      }
    ],
    'dimensions': [
      {
        'name': 'ga:date'
      }
    ],
    'dimensionFilterClauses': [
      {
        'operator': 'AND',
        'filters': [
          {
            'dimensionName': 'ga:screenName',
            'operator': 'REGEXP',
            'expressions': [
              'homepage'
            ],
            'caseSensitive': true
          }
        ]
      }
    ]
  };
} else if (product == 'web') {
  eventCategory = 'Web Privileges';
  tapAction = 'Tap';
  buySuccessStandard = 'Buy Success:Standard';
  buySuccessPremium = 'Buy Success:Premium';
  startDate = '2018-05-10';
  pageTitle = 'Web Subscription';
  homePagePV = {//pv
    //1. /phone/|phoneapp.html|phone.html|androidapp.html|iphone-2014.html|bb-2014.html|ftcapp
    // 2. android system
    // 3. storypage
    'viewId': VIEW_ID,
    'dateRanges': [
      {
        'startDate': startDate,
        'endDate': endDate
      }
    ],
    'metrics': [
      {
        'expression': 'ga:pageviews'
      }
    ],
    'dimensions': [
      {
        'name': 'ga:date'
      }
    ],
    'dimensionFilterClauses': [
      {
        'operator': 'AND',
        'filters': [
          {
            'dimensionName': 'ga:pagePath',
            'operator': 'REGEXP',
            'expressions': [
              '^/$'
            ],
            'caseSensitive': true
          }
        ]
      }
    ]
  };
} else if (product == 'android') {
  eventCategory = 'Android Privileges';
  tapAction = 'Tap';
  buySuccessStandard = 'Buy success: ftc_standard';
  buySuccessPremium = 'Buy success: ftc_premium';
  startDate = '2018-04-20';
  pageTitle = 'Android Subscription';
  homePagePV = {//pv
    //1. /phone/|phoneapp.html|phone.html|androidapp.html|iphone-2014.html|bb-2014.html|ftcapp
    // 2. android system
    // 3. storypage
    'viewId': VIEW_ID,
    'dateRanges': [
      {
        'startDate': startDate,
        'endDate': endDate
      }
    ],
    'metrics': [
      {
        'expression': 'ga:pageviews'
      }
    ],
    'dimensions': [
      {
        'name': 'ga:date'
      }
    ],
    'dimensionFilterClauses': [
      {
        'operator': 'AND',
        'filters': [
          {
            'dimensionName': 'ga:pagePath',
            'operator': 'REGEXP',
            'expressions': [
              '/phone/|phoneapp.html|phone.html|androidapp.html|iphone-2014.html|bb-2014.html|ftcapp'
            ],
            'caseSensitive': true
          },
          {
            'dimensionName': 'ga:operatingSystem',
            'operator': 'EXACT',
            'expressions': [
              'Android'
            ],
            'caseSensitive': true
          }
        ]
      }
    ]
  };
} else {
  eventCategory = 'Privileges';
  tapAction = 'Tap Subscription';
  buySuccessStandard = 'buy success: com.ft.ftchinese.mobile.subscription.member';
  buySuccessPremium = 'buy success: com.ft.ftchinese.mobile.subscription.vip';
  startDate = '2018-04-04';
  pageTitle = 'Subscription';
  homePagePV = {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:screenviews'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:screenName',
              'operator': 'REGEXP',
              'expressions': [
                'homepage'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    };
}


document.title = pageTitle;
document.querySelector('.page-title').innerHTML = pageTitle;

function constructQuerryData(startDate, endDate) {
  var queryData = [
    // 0 Standard Subscription Buying
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            }
            
          ]
        }
      ]
    },// 1 Buy Premium Subscription
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessPremium
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 2 Paywall Displayed
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                '\/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 3 Paywall Tap Subscription Page in Story Page
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                tapAction
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                '\/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 4 Buy Standard Subscription
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 5 Buy Premium Subscription
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessPremium
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 6 Product Home Page PV
    homePagePV,// 7 Buy Standard Subscription from English Audio in Story
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishAudio/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 8 Buy Premium Subscription from Editor's Choice
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                buySuccessPremium
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'story/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 9 Expired User Visit
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                'iOS Subscription Expires'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 10 Buy Subscription from Exclusive Story
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'ExclusiveContent/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 11 Buy Subscription from English Text
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishText/.+/en'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 12 Buy Subscription from FT Radio
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'Radio/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 13 Buy Subscription from Speed Read
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'SpeedReading/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 14 Buy Subscription from Archive
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'Archive/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 15 Buy Subscription from Editor's Choice
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EditorsChoice/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 16 Buy Subscription from English Audio
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishAudio/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 17 Dispay Subscription from Exclusive Story
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'ExclusiveContent/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 18 Display Subscription from English Text
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishText/.+/en'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 19 Display Subscription from FT Radio
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'Radio/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 20 Display Subscription from Speed Read
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'SpeedReading/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 21 Display Subscription from Archive
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'Archive/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 22 Display Subscription from Editor's Choice
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EditorsChoice/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 23 Display Subscription from Editor's Choice
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishAudio/'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 24 Buy Subscription from Billigual Text
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishText/.+/ce'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 25 Display Subscription from Billigual Text
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'EnglishText/.+/ce'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 26 Buy Subscription from Ad Blocker
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'REGEXP',
              'expressions': [
                buySuccessStandard
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'AdBlocker'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    },// 27 Display Subscription from Ad Blocker
    {
      'viewId': VIEW_ID,
      'dateRanges': [
        {
          'startDate': startDate,
          'endDate': endDate
        }
      ],
      'metrics': [
        {
          'expression': 'ga:uniqueEvents'
        }
      ],
      'dimensions': [
        {
          'name': 'ga:date'
        }
      ],
      'dimensionFilterClauses': [
        {
          'operator': 'AND',
          'filters': [
            {
              'dimensionName': 'ga:eventCategory',
              'operator': 'EXACT',
              'expressions': [
                eventCategory
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventAction',
              'operator': 'EXACT',
              'expressions': [
                'Display'
              ],
              'caseSensitive': true
            },
            {
              'dimensionName': 'ga:eventLabel',
              'operator': 'REGEXP',
              'expressions': [
                'AdBlocker'
              ],
              'caseSensitive': true
            }
          ]
        }
      ]
    }
  ];
  return queryData;
}

function drawChartsAll() {

  var chartId;
  // MARK: - The base key which should have no gap in data
  var keys = gaDataReports[0].data.rows.map(function(row){
    return row.dimensions[0];
  });



  // MARK: Filter out dates when data collection experienced problems
  // keys = keys.filter(function(item){
  //   if (['20170527','20170528','20170529','20170530','20170531'].indexOf(item) < 0) {
  //     return item;
  //   }
  // });


  drawChartByKey({
    title: 'New Subscriptions',
    type: 'column',
    percentage: false,
    keys: keys,
    showPlotLines: true,
    trendline: 'first',
    data: [
      {
        index: 0,
        name: 'Standard'
      },
      {
        index: 1,
        name: 'Premium'
      }
    ]
  });

  drawChartByKey({
    title: 'New Revenue',
    type: 'column',
    percentage: false,
    keys: keys,
    unitName: 'RMB',
    showPlotLines: true,
    trendline: 'sum',
    data: [
      {
        index: 0,
        name: 'Standard',
        multiplier: stardardPrice
      },
      {
        index: 1,
        name: 'Premium',
        multiplier: premiumPrice
      }
    ],
    plotOptions: {
      column: {
          stacking: 'normal'
      }
    }
  });

  // drawChartByKey({
  //   title: 'Standard Subscription Triggers',
  //   type: 'column',
  //   percentage: false,
  //   keys: keys,
  //   data: [
  //     {
  //       index: 4,
  //       name: 'Exclusive Story'
  //     },
  //     {
  //       index: 7,
  //       name: 'English Audio'
  //     }
  //   ]
  // });


  // drawChartByKey({
  //   title: 'Premium Subscription Sources',
  //   type: 'column',
  //   percentage: false,
  //   keys: keys,
  //   data: [
  //     {
  //       index: 5,
  //       name: 'Exclusive Story'
  //     },
  //     {
  //       index: 8,
  //       name: 'Editors\' Choice'
  //     }
  //   ]
  // });

  insertPicture('Subscription Acquisition Channel', 'http://i.ftimg.net/picture/0/000076060_piclink.jpg');

  drawChartByKey({
    title: 'Conversion Funnel',
    type: 'funnel',
    unitName: 'Event',
    percentage: false,
    data: [
      {
        index: 2,
        name: 'Paywall Displayed'
      },
      {
        index: 3,
        name: 'Check the Subscription Options'
      },
      {
        index: 4,
        name: 'Buy Standard Subscription'
      },
      {
        index: 5,
        name: 'Buy Premium Subscription'
      }
    ]
  });

  drawChartByKey({
    title: 'Daily Performance',
    type: 'column',
    percentage: false,
    keys: keys,
    data: [
      {
        index: 2,
        name: 'Paywall Displayed in Story'
      },
      {
        index: 3,
        name: 'Check the Subscription Options'
      },
      {
        index: 4,
        name: 'Buy Standard Subscription'
      },
      {
        index: 5,
        name: 'Buy Premium Subscription'
      }
    ]
  });




  drawChartByKey({
    conversion: true,
    title: 'Daily: Bought VS Displayed',
    type: 'area',
    percentage: false,
    keys: keys,
    data: [
      {
        index: 2,
        name: 'Displayed'
      },
      {
        index: 4,
        name: 'Bought'
      }
    ]
  });




  drawChartByKey({
    conversion: true,
    title: 'Daily: Checked VS Displayed',
    type: 'area',
    percentage: false,
    keys: keys,
    data: [
      {
        index: 2,
        name: 'Displayed'
      },
      {
        index: 3,
        name: 'Checked'
      }
    ]
  });




  drawChartByKey({
    conversion: true,
    title: 'Daily: Bought VS Checked',
    type: 'area',
    percentage: false,
    keys: keys,
    data: [
      {
        index: 3,
        name: 'Checked'
      },
      {
        index: 4,
        name: 'Bought'
      }
    ]
  });


  drawChartByKey({
    conversion: true,
    title: 'Daily: Paywall Seen',
    type: 'area',
    percentage: false,
    keys: keys,
    showPlotLines: true,
    data: [
      {
        index: 6,
        name: 'Home Page PV'
      },
      {
        index: 2,
        name: 'Paywall Displayed'
      }
    ]
  });

  drawBreakDownChart({
    title: 'What Triggers Paywall? ',
    type: 'pie',
    data: [
      {
        index: 17,
        name: 'Exclusive Story'
      },
      {
        index: 25,
        name: 'Billigual Text'
      },
      {
        index: 18,
        name: 'English Text'
      },
      {
        index: 19,
        name: 'FT Radio'
      },
      {
        index: 20,
        name: 'Speedread'
      },
      {
        index: 21,
        name: 'Archive'
      },
      {
        index: 22,
        name: 'Editors\'s Choice'
      },
      {
        index: 27,
        name: 'Ad Blocker'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'What Triggers Paywall Daily? ',
    type: 'column',
    percentage: false,
    keys: keys,
    showPlotLines: true,
    data: [
      {
        index: 17,
        name: 'Exclusive Story'
      },
      {
        index: 25,
        name: 'Billigual Text'
      },
      {
        index: 18,
        name: 'English Text'
      },
      {
        index: 19,
        name: 'FT Radio'
      },
      {
        index: 20,
        name: 'Speedread'
      },
      {
        index: 21,
        name: 'Archive'
      },
      {
        index: 22,
        name: 'Editors\'s Choice'
      },
      {
        index: 27,
        name: 'Ad Blocker'
      }
    ]
  });


  drawBreakDownChart({
    title: 'What Drives Standard Subscription? ',
    type: 'pie',
    data: [
      {
        index: 10,
        name: 'Exclusive Story'
      },
      {
        index: 24,
        name: 'Billigual Text'
      },
      {
        index: 11,
        name: 'English Text'
      },
      {
        index: 12,
        name: 'FT Radio'
      },
      {
        index: 13,
        name: 'Speedread'
      },
      {
        index: 14,
        name: 'Archive'
      },
      {
        index: 15,
        name: 'Editors\'s Choice'
      },
      {
        index: 16,
        name: 'English Audio'
      },
      {
        index: 26,
        name: 'Ad Blocker'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'What Drives Standard Subscription Daily? ',
    type: 'column',
    percentage: false,
    keys: keys,
    showPlotLines: true,
    data: [
      {
        index: 10,
        name: 'Exclusive Story'
      },
      {
        index: 24,
        name: 'Billigual Text'
      },
      {
        index: 11,
        name: 'English Text'
      },
      {
        index: 12,
        name: 'FT Radio'
      },
      {
        index: 13,
        name: 'Speedread'
      },
      {
        index: 14,
        name: 'Archive'
      },
      {
        index: 15,
        name: 'Editors\'s Choice'
      },
      {
        index: 16,
        name: 'English Audio'
      },
      {
        index: 26,
        name: 'Ad Blocker'
      }
    ]
  });

  drawChartByKey({
    conversion: true,
    title: 'Standard subscription Conversion',
    yAxisTitle: 'Percent',
    type: 'column',
    percentage: true,
    keys: keys,
    dataSets: [product],
    showPlotLines: true,
    subtitle: ' ',
    unitName: '%',
    decimalPoints: 4,
    data: [
      {
        total: 17,
        part: 10,
        name: 'Exclusive Story'
      },
      {
        total: 25,
        part: 24,
        name: 'Billigual Text'
      },
      {
        total: 18,
        part: 11,
        name: 'English Text'
      },
      {
        total: 19,
        part: 12,
        name: 'Radio'
      },
      {
        total: 20,
        part: 13,
        name: 'Speedread'
      },
      {
        total: 21,
        part: 14,
        name: 'Archive'
      },
      {
        total: 22,
        part: 15,
        name: 'Editors\' Choice'
      },
      {
        total: 27,
        part: 26,
        name: 'Ad Blocker'
      }
    ]
  });


}
</script>




<!-- Load the JavaScript API client and Sign-in library. -->
<script src="https://apis.google.com/js/client:platform.js"></script>

</body>
</html>